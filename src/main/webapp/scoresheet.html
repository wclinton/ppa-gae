<!DOCTYPE html>
<html data-ng-app="myApp">

<head lang="en">
<meta charset="utf-8">
<title>Scoresheet Selection</title>

<link rel="stylesheet" type="text/css"
	href="http://angular-ui.github.com/ng-grid/css/ng-grid.css" />
<link rel="stylesheet" type="text/css" href="css/style.css" />

<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script
	src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js"></script>
<script type="text/javascript"
	src="http://angular-ui.github.com/ng-grid/lib/ng-grid.debug.js"></script>




<script type="text/javascript">
	var app = angular.module('myApp', [ 'ngGrid' ]);

	app.controller('MyCtrl', function($scope, $http) {

		$scope.populateGridData = function() {
			var myactivevalue = angular.element(
					document.querySelector('#activeTeam')).val();
			$http({
				method : 'GET',
				url : 'players?teamNumber=' + myactivevalue
			}).success(function(dataBasket, status, headers, config) {
				$scope.myData = dataBasket;
			}).error(function(data, status, headers, config) {
				// called asynchronously if an error occurs show here
			});
		};
		$scope.filterOptions = {
			filterText : ''
		};

		$scope.gridOptions = {
			data : 'myData.players',
			//showGroupPanel : true,
			rowHeight : 22,
			columnDefs : [ {
				field : 'firstName',
				displayName : 'First Name'
			}, {
				field : 'lastName',
				displayName : 'Last Name'
			},

			{
				field : 'actualAverage',
				displayName : 'Average'
			}, {
				field : 'totalPoints',
				displayName : 'Points'
			}, {
				field : 'gamesPlayed',
				displayName : 'Games'
			},

			]
		};

		// 		$scope.gridOptions = {
		// 			data : 'myData',
		// 			showGroupPanel : true,
		// 			filterOptions : $scope.filterOptions,
		// 			showColumnMenu : true,
		// 			showFilter : true,
		// 			selectedItems : $scope.mySelections,
		// 			multiSelect : false,
		// 			rowHeight : 22
		//		};
		$scope.getDropDownDataFromServer = function() {
			$http({
				method : 'GET',
				url : 'teams'
			}).success(function(data, status, headers, config) {
				$scope.activeTeam = data;
			}).error(function(data, status, headers, config) {
				// called asynchronously if an error occurs show here           
			});

		};

	});
</script>


</head>

<body ng-controller="MyCtrl">


	<div class='tab'>
		<div data-ng-init="getDropDownDataFromServer()"
			class="activeTeamsDropdownStyle">
			<b>Active Teams eh:</b> <select id="activeTeam"
				data-ng-model="selectedTeam" data-ng-change="populateGridData();"
				style="font-size: 11px">
				<option value="">-- Select Active Team --</option>

				<option data-ng-repeat="team in activeTeam.teams"
					value="{{team.number}}">{{team.number}}.{{team.name}}</option>
			</select><br>
		</div>
		<div class="gridStyle" ng-grid="gridOptions"></div>
</body>

</html>